<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ramadan Adventure üåô</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      margin: 0;
      overflow: hidden;
      background: linear-gradient(to bottom, #0c1445, #1a237e);
      font-family: 'Arial', sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 10px;
      touch-action: manipulation;
    }
    
    #gameContainer {
      position: relative;
      text-align: center;
      width: 100%;
      max-width: 500px;
    }
    
    #gameInfo {
      position: absolute;
      top: 5px;
      left: 5px;
      display: flex;
      flex-direction: column;
      gap: 3px;
      z-index: 10;
    }
    
    .infoBox {
      font-size: clamp(12px, 3vw, 16px);
      font-weight: bold;
      color: gold;
      text-shadow: 2px 2px 5px black;
      background: rgba(0, 0, 0, 0.5);
      padding: 3px 10px;
      border-radius: 15px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    canvas {
      display: block;
      border: 3px solid gold;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
      width: 100%;
      height: auto;
      max-height: 80vh;
    }
    
    .controls {
      margin-top: 15px;
      display: flex;
      justify-content: space-around;
      width: 100%;
      max-width: 400px;
      gap: 20px;
    }
    
    .btn {
      width: clamp(60px, 15vw, 80px);
      height: clamp(60px, 15vw, 80px);
      border-radius: 50%;
      background: linear-gradient(145deg, #ffd700, #ffed4e);
      text-align: center;
      line-height: clamp(60px, 15vw, 80px);
      font-size: clamp(24px, 6vw, 30px);
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
      user-select: none;
      cursor: pointer;
      border: 2px solid white;
      color: #1a237e;
      font-weight: bold;
      flex-shrink: 0;
    }
    
    .btn:active {
      transform: scale(0.95);
    }
    
    #title {
      color: gold;
      font-size: clamp(20px, 6vw, 28px);
      margin-bottom: 8px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      text-align: center;
    }
    
    #instructions {
      color: white;
      margin-bottom: 10px;
      background: rgba(0, 0, 0, 0.5);
      padding: 8px;
      border-radius: 10px;
      font-size: clamp(12px, 3vw, 14px);
      text-align: center;
    }
    
    #scoreboard {
      position: absolute;
      top: 5px;
      right: 5px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 8px;
      border-radius: 10px;
      width: clamp(120px, 30vw, 150px);
      max-height: 150px;
      overflow-y: auto;
      display: none;
      font-size: clamp(10px, 2.5vw, 12px);
    }
    
    #scoreboard h3 {
      margin: 0 0 8px 0;
      color: gold;
      text-align: center;
      font-size: clamp(12px, 3vw, 14px);
    }
    
    #scoreboard ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }
    
    #scoreboard li {
      padding: 3px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      display: flex;
      justify-content: space-between;
    }
    
    #scoreboard li:last-child {
      border-bottom: none;
    }
    
    #levelIndicator {
      position: absolute;
      bottom: 5px;
      left: 5px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 4px 8px;
      border-radius: 10px;
      font-size: clamp(10px, 2.5vw, 12px);
    }
    
    #gameOverScreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      z-index: 100;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }
    
    #gameOverScreen h2 {
      color: gold;
      font-size: clamp(24px, 7vw, 36px);
      margin-bottom: 10px;
    }
    
    #gameOverScreen p {
      font-size: clamp(14px, 4vw, 18px);
      margin-bottom: 15px;
    }
    
    #restartBtn {
      margin-top: 15px;
      padding: 10px 20px;
      background: linear-gradient(145deg, #ffd700, #ffed4e);
      border: none;
      border-radius: 20px;
      color: #1a237e;
      font-weight: bold;
      cursor: pointer;
      font-size: clamp(14px, 4vw, 16px);
    }
    
    #pauseScreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      z-index: 100;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }
    
    #pauseScreen h2 {
      color: gold;
      font-size: clamp(24px, 7vw, 36px);
      margin-bottom: 15px;
    }
    
    #pauseScreen p {
      font-size: clamp(14px, 4vw, 16px);
    }
    
    #pauseBtn {
      position: absolute;
      top: 5px;
      right: 5px;
      width: clamp(35px, 9vw, 45px);
      height: clamp(35px, 9vw, 45px);
      background: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: gold;
      font-size: clamp(16px, 4vw, 20px);
      cursor: pointer;
      z-index: 10;
      border: 2px solid gold;
    }
    
    /* Mobile-specific adjustments */
    @media (max-width: 480px) {
      body {
        padding: 5px;
        justify-content: flex-start;
        padding-top: 10px;
      }
      
      #gameContainer {
        max-width: 100%;
      }
      
      .controls {
        margin-top: 10px;
        gap: 15px;
      }
      
      .btn {
        width: 70px;
        height: 70px;
        line-height: 70px;
      }
    }
    
    @media (max-width: 320px) {
      .btn {
        width: 60px;
        height: 60px;
        line-height: 60px;
      }
      
      #instructions {
        padding: 5px;
      }
    }
    
    /* Tablet adjustments */
    @media (min-width: 768px) and (max-width: 1024px) {
      #gameContainer {
        max-width: 600px;
      }
      
      .btn {
        width: 80px;
        height: 80px;
        line-height: 80px;
      }
    }
    
    /* Landscape mode adjustments */
    @media (max-height: 500px) and (orientation: landscape) {
      body {
        padding: 5px;
        justify-content: flex-start;
      }
      
      #gameContainer {
        display: flex;
        flex-direction: row;
        align-items: center;
        max-width: 100%;
        gap: 10px;
      }
      
      #title {
        display: none;
      }
      
      #instructions {
        display: none;
      }
      
      canvas {
        max-height: 90vh;
        width: auto;
        flex: 1;
      }
      
      .controls {
        flex-direction: column;
        width: auto;
        margin-top: 0;
        gap: 10px;
      }
      
      .btn {
        width: 60px;
        height: 60px;
        line-height: 60px;
      }
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <h1 id="title">üåô Ramadan Adventure üåô</h1>
    <div id="instructions">Collect good deeds, avoid bad habits!</div>
    
    <div id="gameInfo">
      <div class="infoBox">Score: <span id="score">0</span></div>
      <div class="infoBox">Level: <span id="level">1</span></div>
      <div class="infoBox">Time: <span id="timer">60</span>s</div>
    </div>
    
    <div id="levelIndicator">Level 1: Easy</div>
    
    <canvas id="gameCanvas"></canvas>
    
    <div id="scoreboard">
      <h3>High Scores</h3>
      <ul id="highScoresList"></ul>
    </div>
    
    <div id="gameOverScreen">
      <h2>Game Over!</h2>
      <p>Your final score: <span id="finalScore">0</span></p>
      <button id="restartBtn">Play Again</button>
    </div>
    
    <div id="pauseScreen">
      <h2>Game Paused</h2>
      <p>Press P or click the pause button to resume</p>
    </div>
    
    <div id="pauseBtn">‚è∏Ô∏è</div>
  </div>

  <div class="controls">
    <div id="leftBtn" class="btn">‚üµ</div>
    <div id="rightBtn" class="btn">‚ü∂</div>
  </div>

  <!-- Audio -->
  <audio id="bgMusic" loop>
    <source src="https://cdn.pixabay.com/download/audio/2023/03/30/audio_0c8fa74f91.mp3?filename=peaceful-background-music-143500.mp3" type="audio/mpeg">
  </audio>
  <audio id="goodSound">
    <source src="https://cdn.pixabay.com/download/audio/2022/10/10/audio_2b4ce6eb2b.mp3?filename=collectcoin-6075.mp3" type="audio/mpeg">
  </audio>
  <audio id="badSound">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_ae11deecec.mp3?filename=error-126627.mp3" type="audio/mpeg">
  </audio>
  <audio id="levelUpSound">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_ae11deecec.mp3?filename=success-1-6297.mp3" type="audio/mpeg">
  </audio>

  <script>
    // Responsive canvas setup
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    
    // Set initial canvas size based on container
    function resizeCanvas() {
      const container = document.getElementById('gameContainer');
      const maxWidth = container.clientWidth;
      const maxHeight = window.innerHeight * 0.7; // 70% of viewport height
      
      // Maintain 400x600 aspect ratio but scale responsively
      const aspectRatio = 400 / 600;
      let width = maxWidth;
      let height = width / aspectRatio;
      
      if (height > maxHeight) {
        height = maxHeight;
        width = height * aspectRatio;
      }
      
      canvas.width = width;
      canvas.height = height;
      
      // Scale game elements based on canvas size
      scaleGameElements();
    }
    
    // Scale game elements based on canvas size
    function scaleGameElements() {
      const scaleX = canvas.width / 400;
      const scaleY = canvas.height / 600;
      
      // Update player size and position
      player.width = 60 * scaleX;
      player.height = 60 * scaleY;
      player.x = (canvas.width - player.width) / 2;
      player.y = canvas.height - player.height - 20 * scaleY;
      player.speed = 5 * scaleX;
      
      // Update object sizes
      objectWidth = 30 * scaleX;
      objectHeight = 30 * scaleY;
      
      // Update spawn area
      spawnArea = canvas.width - objectWidth;
    }
    
    // Game state
    const gameState = {
      score: 0,
      level: 1,
      timeLeft: 60,
      gameStarted: false,
      gameOver: false,
      paused: false,
      levelUpThreshold: 100,
      levels: [
        { name: "Easy", speed: 4, goodSpawnRate: 0.03, badSpawnRate: 0.02 },
        { name: "Medium", speed: 5, goodSpawnRate: 0.04, badSpawnRate: 0.03 },
        { name: "Hard", speed: 6, goodSpawnRate: 0.05, badSpawnRate: 0.04 },
        { name: "Expert", speed: 7, goodSpawnRate: 0.06, badSpawnRate: 0.05 }
      ]
    };

    // Create player image (mosque silhouette)
    function createPlayerImage() {
      const img = new Image();
      const tempCanvas = document.createElement('canvas');
      tempCanvas.width = 60;
      tempCanvas.height = 60;
      const tempCtx = tempCanvas.getContext('2d');
      
      // Draw mosque silhouette
      tempCtx.fillStyle = '#8B4513';
      tempCtx.fillRect(15, 20, 30, 40); // Main building
      
      tempCtx.fillStyle = '#2E8B57';
      tempCtx.beginPath();
      tempCtx.moveTo(10, 20);
      tempCtx.lineTo(50, 20);
      tempCtx.lineTo(40, 10);
      tempCtx.lineTo(20, 10);
      tempCtx.closePath();
      tempCtx.fill(); // Roof
      
      tempCtx.fillStyle = '#FFD700';
      tempCtx.beginPath();
      tempCtx.arc(30, 15, 5, 0, Math.PI * 2);
      tempCtx.fill(); // Crescent moon
      
      tempCtx.fillStyle = '#2E8B57';
      tempCtx.beginPath();
      tempCtx.arc(30, 15, 3, 0, Math.PI, true);
      tempCtx.fill(); // Crescent moon fill
      
      img.src = tempCanvas.toDataURL();
      return img;
    }

    // Create good deed image (prayer mat)
    function createGoodDeedImage() {
      const img = new Image();
      const tempCanvas = document.createElement('canvas');
      tempCanvas.width = 30;
      tempCanvas.height = 30;
      const tempCtx = tempCanvas.getContext('2d');
      
      tempCtx.fillStyle = '#2E8B57';
      tempCtx.fillRect(0, 0, 30, 30);
      
      tempCtx.strokeStyle = '#FFD700';
      tempCtx.lineWidth = 2;
      tempCtx.strokeRect(2, 2, 26, 26);
      
      tempCtx.fillStyle = '#FFD700';
      tempCtx.beginPath();
      tempCtx.arc(15, 15, 8, 0, Math.PI * 2);
      tempCtx.fill();
      
      tempCtx.fillStyle = '#2E8B57';
      tempCtx.beginPath();
      tempCtx.arc(15, 15, 6, 0, Math.PI, true);
      tempCtx.fill();
      
      img.src = tempCanvas.toDataURL();
      return img;
    }

    // Create bad habit image (clock - wasting time)
    function createBadHabitImage() {
      const img = new Image();
      const tempCanvas = document.createElement('canvas');
      tempCanvas.width = 30;
      tempCanvas.height = 30;
      const tempCtx = tempCanvas.getContext('2d');
      
      tempCtx.fillStyle = '#8B0000';
      tempCtx.beginPath();
      tempCtx.arc(15, 15, 12, 0, Math.PI * 2);
      tempCtx.fill();
      
      tempCtx.strokeStyle = 'white';
      tempCtx.lineWidth = 2;
      tempCtx.beginPath();
      tempCtx.arc(15, 15, 12, 0, Math.PI * 2);
      tempCtx.stroke();
      
      // Clock hands
      tempCtx.strokeStyle = 'white';
      tempCtx.lineWidth = 2;
      tempCtx.beginPath();
      tempCtx.moveTo(15, 15);
      tempCtx.lineTo(15, 8);
      tempCtx.stroke();
      
      tempCtx.beginPath();
      tempCtx.moveTo(15, 15);
      tempCtx.lineTo(20, 15);
      tempCtx.stroke();
      
      img.src = tempCanvas.toDataURL();
      return img;
    }

    const playerImg = createPlayerImage();
    const goodImg = createGoodDeedImage();
    const badImg = createBadHabitImage();

    // Initialize player with default values (will be scaled in resizeCanvas)
    const player = { 
      x: 180, 
      y: 500, 
      width: 60, 
      height: 60, 
      speed: 5 
    };
    
    const goodDeeds = [];
    const badHabits = [];
    
    // Object dimensions (will be scaled in resizeCanvas)
    let objectWidth = 30;
    let objectHeight = 30;
    let spawnArea = 370;

    let leftPressed = false;
    let rightPressed = false;
    let timerInterval;

    // DOM elements
    const scoreEl = document.getElementById("score");
    const levelEl = document.getElementById("level");
    const timerEl = document.getElementById("timer");
    const levelIndicator = document.getElementById("levelIndicator");
    const scoreboard = document.getElementById("scoreboard");
    const highScoresList = document.getElementById("highScoresList");
    const gameOverScreen = document.getElementById("gameOverScreen");
    const finalScoreEl = document.getElementById("finalScore");
    const restartBtn = document.getElementById("restartBtn");
    const pauseScreen = document.getElementById("pauseScreen");
    const pauseBtn = document.getElementById("pauseBtn");

    // Audio elements
    const bgMusic = document.getElementById("bgMusic");
    const goodSound = document.getElementById("goodSound");
    const badSound = document.getElementById("badSound");
    const levelUpSound = document.getElementById("levelUpSound");

    // High scores
    let highScores = JSON.parse(localStorage.getItem('ramadanHighScores')) || [];

    // Initialize the game
    window.addEventListener('load', () => {
      resizeCanvas();
      drawInitialScreen();
    });
    
    window.addEventListener('resize', () => {
      resizeCanvas();
      if (!gameState.gameStarted) {
        drawInitialScreen();
      }
    });

    // Start game on click/touch
    document.body.addEventListener("click", startGame, { once: true });
    document.body.addEventListener("touchstart", startGame, { once: true });

    function startGame() {
      if (!gameState.gameStarted) {
        gameState.gameStarted = true;
        bgMusic.play().catch(() => {});
        startTimer();
        gameLoop();
      }
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        if (!gameState.paused) {
          gameState.timeLeft--;
          timerEl.textContent = gameState.timeLeft;
          
          if (gameState.timeLeft <= 0) {
            endGame();
          }
        }
      }, 1000);
    }

    function endGame() {
      gameState.gameOver = true;
      clearInterval(timerInterval);
      bgMusic.pause();
      bgMusic.currentTime = 0;
      
      // Update high scores
      updateHighScores(gameState.score);
      
      // Show game over screen
      finalScoreEl.textContent = gameState.score;
      gameOverScreen.style.display = 'flex';
    }

    function restartGame() {
      // Reset game state
      gameState.score = 0;
      gameState.level = 1;
      gameState.timeLeft = 60;
      gameState.gameStarted = false;
      gameState.gameOver = false;
      gameState.paused = false;
      
      // Clear arrays
      goodDeeds.length = 0;
      badHabits.length = 0;
      
      // Reset UI
      scoreEl.textContent = '0';
      levelEl.textContent = '1';
      timerEl.textContent = '60';
      levelIndicator.textContent = `Level 1: ${gameState.levels[0].name}`;
      pauseScreen.style.display = 'none';
      pauseBtn.innerHTML = '‚è∏Ô∏è';
      
      // Hide game over screen
      gameOverScreen.style.display = 'none';
      
      // Draw initial screen
      drawInitialScreen();
    }

    function togglePause() {
      if (!gameState.gameStarted || gameState.gameOver) return;
      
      gameState.paused = !gameState.paused;
      
      if (gameState.paused) {
        bgMusic.pause();
        pauseScreen.style.display = 'flex';
        pauseBtn.innerHTML = '‚ñ∂Ô∏è';
      } else {
        bgMusic.play().catch(() => {});
        pauseScreen.style.display = 'none';
        pauseBtn.innerHTML = '‚è∏Ô∏è';
      }
    }

    function updateHighScores(score) {
      // Add new score
      highScores.push({
        score: score,
        date: new Date().toLocaleDateString()
      });
      
      // Sort by score (descending)
      highScores.sort((a, b) => b.score - a.score);
      
      // Keep only top 5
      highScores = highScores.slice(0, 5);
      
      // Save to localStorage
      localStorage.setItem('ramadanHighScores', JSON.stringify(highScores));
      
      // Update display
      displayHighScores();
    }

    function displayHighScores() {
      highScoresList.innerHTML = '';
      
      if (highScores.length === 0) {
        highScoresList.innerHTML = '<li>No scores yet</li>';
        return;
      }
      
      highScores.forEach((entry, index) => {
        const li = document.createElement('li');
        li.innerHTML = `
          <span>${index + 1}. ${entry.score}</span>
          <span>${entry.date}</span>
        `;
        highScoresList.appendChild(li);
      });
    }

    function checkLevelUp() {
      const currentLevel = gameState.level;
      const nextLevelThreshold = currentLevel * gameState.levelUpThreshold;
      
      if (gameState.score >= nextLevelThreshold && currentLevel < gameState.levels.length) {
        gameState.level++;
        levelEl.textContent = gameState.level;
        
        // Update level indicator
        const levelData = gameState.levels[gameState.level - 1];
        levelIndicator.textContent = `Level ${gameState.level}: ${levelData.name}`;
        
        // Play level up sound
        levelUpSound.currentTime = 0;
        levelUpSound.play();
        
        // Add time bonus
        gameState.timeLeft += 15;
        timerEl.textContent = gameState.timeLeft;
      }
    }

    function spawnObjects() {
      if (gameState.paused) return;
      
      const levelData = gameState.levels[gameState.level - 1];
      
      if (Math.random() < levelData.goodSpawnRate) {
        goodDeeds.push({ 
          x: Math.random() * spawnArea, 
          y: 0,
          width: objectWidth,
          height: objectHeight
        });
      }
      
      if (Math.random() < levelData.badSpawnRate) {
        badHabits.push({ 
          x: Math.random() * spawnArea, 
          y: 0,
          width: objectWidth,
          height: objectHeight
        });
      }
    }

    function movePlayer() {
      if (gameState.paused) return;
      
      if (leftPressed && player.x > 0) player.x -= player.speed;
      if (rightPressed && player.x < canvas.width - player.width) player.x += player.speed;
    }

    function drawPlayer() {
      ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);
    }

    function drawBackground() {
      // Draw stars
      ctx.fillStyle = 'white';
      for (let i = 0; i < 50; i++) {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height;
        const size = Math.random() * 2;
        ctx.beginPath();
        ctx.arc(x, y, size, 0, Math.PI * 2);
        ctx.fill();
      }
      
      // Draw crescent moon
      ctx.fillStyle = 'gold';
      ctx.beginPath();
      ctx.arc(canvas.width - 50, 50, 20, 0, Math.PI * 2);
      ctx.fill();
      
      ctx.fillStyle = '#0c1445';
      ctx.beginPath();
      ctx.arc(canvas.width - 55, 45, 18, 0, Math.PI * 2);
      ctx.fill();
    }

    function updateObjects(list, img, isGood) {
      if (gameState.paused) return;
      
      const levelData = gameState.levels[gameState.level - 1];
      const speedScale = canvas.height / 600; // Scale speed based on canvas height
      
      for (let i = list.length - 1; i >= 0; i--) {
        const obj = list[i];
        obj.y += levelData.speed * speedScale;
        ctx.drawImage(img, obj.x, obj.y, obj.width, obj.height);

        // Collision detection
        if (obj.x < player.x + player.width &&
            obj.x + obj.width > player.x &&
            obj.y < player.y + player.height &&
            obj.y + obj.height > player.y) {
          if (isGood) {
            gameState.score += 10;
            goodSound.currentTime = 0;
            goodSound.play();
          } else {
            gameState.score = Math.max(0, gameState.score - 5);
            badSound.currentTime = 0;
            badSound.play();
          }
          list.splice(i, 1);
          scoreEl.textContent = gameState.score;
          checkLevelUp();
        } else if (obj.y > canvas.height) {
          list.splice(i, 1);
        }
      }
    }

    function drawInitialScreen() {
      drawBackground();
      ctx.fillStyle = 'white';
      ctx.font = `${Math.min(20, canvas.width / 20)}px Arial`;
      ctx.textAlign = 'center';
      ctx.fillText('Tap anywhere to start', canvas.width / 2, canvas.height / 2);
    }

    function gameLoop() {
      if (gameState.gameOver) return;
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBackground();
      movePlayer();
      drawPlayer();
      updateObjects(goodDeeds, goodImg, true);
      updateObjects(badHabits, badImg, false);
      spawnObjects();

      requestAnimationFrame(gameLoop);
    }

    // Keyboard controls
    document.addEventListener("keydown", e => {
      if (e.key === "ArrowLeft") leftPressed = true;
      if (e.key === "ArrowRight") rightPressed = true;
      if (e.key === "h" || e.key === "H") {
        scoreboard.style.display = scoreboard.style.display === 'block' ? 'none' : 'block';
      }
      if (e.key === "p" || e.key === "P" || e.key === " ") {
        togglePause();
      }
    });
    
    document.addEventListener("keyup", e => {
      if (e.key === "ArrowLeft") leftPressed = false;
      if (e.key === "ArrowRight") rightPressed = false;
    });

    // Touch controls
    document.getElementById("leftBtn").addEventListener("touchstart", (e) => {
      e.preventDefault();
      leftPressed = true;
    });
    
    document.getElementById("leftBtn").addEventListener("touchend", (e) => {
      e.preventDefault();
      leftPressed = false;
    });
    
    document.getElementById("rightBtn").addEventListener("touchstart", (e) => {
      e.preventDefault();
      rightPressed = true;
    });
    
    document.getElementById("rightBtn").addEventListener("touchend", (e) => {
      e.preventDefault();
      rightPressed = false;
    });

    // Mouse controls for buttons (for desktop testing)
    document.getElementById("leftBtn").addEventListener("mousedown", () => leftPressed = true);
    document.getElementById("leftBtn").addEventListener("mouseup", () => leftPressed = false);
    document.getElementById("leftBtn").addEventListener("mouseleave", () => leftPressed = false);
    
    document.getElementById("rightBtn").addEventListener("mousedown", () => rightPressed = true);
    document.getElementById("rightBtn").addEventListener("mouseup", () => rightPressed = false);
    document.getElementById("rightBtn").addEventListener("mouseleave", () => rightPressed = false);

    // Pause button
    pauseBtn.addEventListener("click", togglePause);

    // Restart button
    restartBtn.addEventListener("click", restartGame);

    // Display high scores initially
    displayHighScores();
  </script>
</body>
</html>